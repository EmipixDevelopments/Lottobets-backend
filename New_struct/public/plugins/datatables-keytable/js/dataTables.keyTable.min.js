/*!
   Copyright 2009-2021 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license/mit

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
 KeyTable 2.6.4
 Â©2009-2021 SpryMedia Ltd - datatables.net/license
*/
var t,e=e||{};e.scope={},e.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},e.arrayIterator=function(t){return{next:e.arrayIteratorImpl(t)}},e.ASSUME_ES5=!1,e.ASSUME_NO_NATIVE_MAP=!1,e.ASSUME_NO_NATIVE_SET=!1,e.SIMPLE_FROUND_POLYFILL=!1,e.ISOLATE_POLYFILLS=!1,e.defineProperty=e.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t},e.getGlobal=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},e.global=e.getGlobal(this),e.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),e.TRUST_ES6_POLYFILLS=!e.ISOLATE_POLYFILLS||e.IS_SYMBOL_NATIVE,e.polyfills={},e.propertyToPolyfillSymbol={},e.POLYFILL_PREFIX="$jscp$",e.polyfill=function(t,n,o,i){n&&(e.ISOLATE_POLYFILLS?e.polyfillIsolated(t,n,o,i):e.polyfillUnisolated(t,n,o,i))},e.polyfillUnisolated=function(t,n,o,i){for(o=e.global,t=t.split("."),i=0;i<t.length-1;i++){var l=t[i];if(!(l in o))return;o=o[l]}(n=n(i=o[t=t[t.length-1]]))!=i&&null!=n&&e.defineProperty(o,t,{configurable:!0,writable:!0,value:n})},e.polyfillIsolated=function(t,n,o,i){var l=t.split(".");t=1===l.length,i=l[0],i=!t&&i in e.polyfills?e.polyfills:e.global;for(var r=0;r<l.length-1;r++){var s=l[r];if(!(s in i))return;i=i[s]}l=l[l.length-1],null!=(n=n(o=e.IS_SYMBOL_NATIVE&&"es6"===o?i[l]:null))&&(t?e.defineProperty(e.polyfills,l,{configurable:!0,writable:!0,value:n}):n!==o&&(e.propertyToPolyfillSymbol[l]=e.IS_SYMBOL_NATIVE?e.global.Symbol(l):e.POLYFILL_PREFIX+l,l=e.propertyToPolyfillSymbol[l],e.defineProperty(i,l,{configurable:!0,writable:!0,value:n})))},e.initSymbol=function(){},e.polyfill("Symbol",(function(t){if(t)return t;var n=function(t,n){this.$jscomp$symbol$id_=t,e.defineProperty(this,"description",{configurable:!0,writable:!0,value:n})};n.prototype.toString=function(){return this.$jscomp$symbol$id_};var o=0,i=function(t){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new n("jscomp_symbol_"+(t||"")+"_"+o++,t)};return i}),"es6","es3"),e.initSymbolIterator=function(){},e.polyfill("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var i=e.global[n[o]];"function"==typeof i&&"function"!=typeof i.prototype[t]&&e.defineProperty(i.prototype,t,{configurable:!0,writable:!0,value:function(){return e.iteratorPrototype(e.arrayIteratorImpl(this))}})}return t}),"es6","es3"),e.initSymbolAsyncIterator=function(){},e.iteratorPrototype=function(t){return(t={next:t})[Symbol.iterator]=function(){return this},t},e.iteratorFromArray=function(t,e){t instanceof String&&(t+="");var n=0,o={next:function(){if(n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return o.next=function(){return{done:!0,value:void 0}},o.next()}};return o[Symbol.iterator]=function(){return o},o},e.polyfill("Array.prototype.keys",(function(t){return t||function(){return e.iteratorFromArray(this,(function(t){return t}))}}),"es6","es3"),t=function(t,e,n,o){var i=t.fn.dataTable,l=0,r=0,s=function(e,n){if(!i.versionCheck||!i.versionCheck("1.10.8"))throw"KeyTable requires DataTables 1.10.8 or newer";if(this.c=t.extend(!0,{},i.defaults.keyTable,s.defaults,n),this.s={dt:new i.Api(e),enable:!0,focusDraw:!1,waitingForDraw:!1,lastFocus:null,namespace:".keyTable-"+l++,tabInput:null},this.dom={},n=(e=this.s.dt.settings()[0]).keytable)return n;e.keytable=this,this._constructor()};return t.extend(s.prototype,{blur:function(){this._blur()},enable:function(t){this.s.enable=t},enabled:function(){return this.s.enable},focus:function(t,e){this._focus(this.s.dt.cell(t,e))},focused:function(t){if(!this.s.lastFocus)return!1;var e=this.s.lastFocus.cell.index();return t.row===e.row&&t.column===e.column},_constructor:function(){this._tabInput();var e=this,o=this.s.dt,i=t(o.table().node()),l=this.s.namespace,r=!1;if("static"===i.css("position")&&i.css("position","relative"),t(o.table().body()).on("click"+l,"th, td",(function(t){if(!1!==e.s.enable){var n=o.cell(this);n.any()&&e._focus(n,null,!1,t)}})),t(n).on("keydown"+l,(function(t){r||e._key(t)})),this.c.blurable&&t(n).on("mousedown"+l,(function(n){t(n.target).parents(".dataTables_filter").length&&e._blur(),t(n.target).parents().filter(o.table().container()).length||t(n.target).parents("div.DTE").length||t(n.target).parents("div.editor-datetime").length||t(n.target).parents("div.dt-datetime").length||t(n.target).parents().filter(".DTFC_Cloned").length||e._blur()})),this.c.editor){var s=this.c.editor;s.on("open.keyTableMain",(function(t,n,o){"inline"!==n&&e.s.enable&&(e.enable(!1),s.one("close"+l,(function(){e.enable(!0)})))})),this.c.editOnFocus&&o.on("key-focus"+l+" key-refocus"+l,(function(t,n,o,i){e._editor(null,i,!0)})),o.on("key"+l,(function(t,n,o,i,l){e._editor(o,l,!1)})),t(o.table().body()).on("dblclick"+l,"th, td",(function(t){!1!==e.s.enable&&o.cell(this).any()&&(e.s.lastFocus&&this!==e.s.lastFocus.cell.node()||e._editor(null,t,!0))})),s.on("preSubmit",(function(){r=!0})).on("preSubmitCancelled",(function(){r=!1})).on("submitComplete",(function(){r=!1}))}o.settings()[0].oFeatures.bStateSave&&o.on("stateSaveParams"+l,(function(t,n,o){o.keyTable=e.s.lastFocus?e.s.lastFocus.cell.index():null})),o.on("column-visibility"+l,(function(t){e._tabInput()})),o.on("draw"+l,(function(t){if(e._tabInput(),!e.s.focusDraw&&e.s.lastFocus){var n=e.s.lastFocus.relative,i=o.page.info(),l=n.row+i.start;0!==i.recordsDisplay&&(l>=i.recordsDisplay&&(l=i.recordsDisplay-1),e._focus(l,n.column,!0,t))}})),this.c.clipboard&&this._clipboard(),o.on("destroy"+l,(function(){e._blur(!0),o.off(l),t(o.table().body()).off("click"+l,"th, td").off("dblclick"+l,"th, td"),t(n).off("mousedown"+l).off("keydown"+l).off("copy"+l).off("paste"+l)}));var a=o.state.loaded();a&&a.keyTable?o.one("init",(function(){var t=o.cell(a.keyTable);t.any()&&t.focus()})):this.c.focus&&o.cell(this.c.focus).focus()},_blur:function(e){if(this.s.enable&&this.s.lastFocus){var n=this.s.lastFocus.cell;t(n.node()).removeClass(this.c.className),this.s.lastFocus=null,e||(this._updateFixedColumns(n.index().column),this._emitEvent("key-blur",[this.s.dt,n]))}},_clipboard:function(){var o=this.s.dt,i=this,l=this.s.namespace;e.getSelection&&(t(n).on("copy"+l,(function(t){t=t.originalEvent;var n=e.getSelection().toString(),o=i.s.lastFocus;!n&&o&&(t.clipboardData.setData("text/plain",o.cell.render(i.c.clipboardOrthogonal)),t.preventDefault())})),t(n).on("paste"+l,(function(t){var l,r=t.originalEvent,s=i.s.lastFocus,a=n.activeElement;t=i.c.editor,!s||a&&"body"!==a.nodeName.toLowerCase()||(r.preventDefault(),e.clipboardData&&e.clipboardData.getData?l=e.clipboardData.getData("Text"):r.clipboardData&&r.clipboardData.getData&&(l=r.clipboardData.getData("text/plain")),t?(r=i._inlineOptions(s.cell.index()),t.inline(r.cell,r.field,r.options).set(t.displayed()[0],l).submit()):(s.cell.data(l),o.draw(!1)))})))},_columns:function(){var t=this.s.dt,e=t.columns(this.c.columns).indexes(),n=[];return t.columns(":visible").every((function(t){-1!==e.indexOf(t)&&n.push(t)})),n},_editor:function(e,o,i){if(this.s.lastFocus&&(!o||"draw"!==o.type)){var l=this,s=this.s.dt,a=this.c.editor,u=this.s.lastFocus.cell,c=this.s.namespace+"e"+r++;if(!(t("div.DTE",u.node()).length||null!==e&&(0<=e&&9>=e||11===e||12===e||14<=e&&31>=e||112<=e&&123>=e||127<=e&&159>=e))){o&&(o.stopPropagation(),13===e&&o.preventDefault());var f=function(){var e=l._inlineOptions(u.index());a.one("open"+c,(function(){a.off("cancelOpen"+c),i||t("div.DTE_Field_InputControl input, div.DTE_Field_InputControl textarea").select(),s.keys.enable(i?"tab-only":"navigation-only"),s.on("key-blur.editor",(function(t,e,n){a.displayed()&&n.node()===u.node()&&a.submit()})),i&&t(s.table().container()).addClass("dtk-focus-alt"),a.on("preSubmitCancelled"+c,(function(){setTimeout((function(){l._focus(u,null,!1)}),50)})),a.on("submitUnsuccessful"+c,(function(){l._focus(u,null,!1)})),a.one("close"+c,(function(){s.keys.enable(!0),s.off("key-blur.editor"),a.off(c),t(s.table().container()).removeClass("dtk-focus-alt"),l.s.returnSubmit&&(l.s.returnSubmit=!1,l._emitEvent("key-return-submit",[s,u]))}))})).one("cancelOpen"+c,(function(){a.off(c)})).inline(e.cell,e.field,e.options)};13===e?(i=!0,t(n).one("keyup",(function(){f()}))):f()}}},_inlineOptions:function(t){return this.c.editorOptions?this.c.editorOptions(t):{cell:t,field:o,options:o}},_emitEvent:function(e,n){this.s.dt.iterator("table",(function(o,i){t(o.nTable).triggerHandler(e,n)}))},_focus:function(i,l,r,s){var a=this,u=this.s.dt,c=u.page.info(),f=this.s.lastFocus;if(s||(s=null),this.s.enable){if("number"!=typeof i){if(!i.any())return;var d=i.index();if(l=d.column,0>(i=u.rows({filter:"applied",order:"applied"}).indexes().indexOf(d.row)))return;c.serverSide&&(i+=c.start)}if(-1!==c.length&&(i<c.start||i>=c.start+c.length))this.s.focusDraw=!0,this.s.waitingForDraw=!0,u.one("draw",(function(){a.s.focusDraw=!1,a.s.waitingForDraw=!1,a._focus(i,l,o,s)})).page(Math.floor(i/c.length)).draw(!1);else if(-1!==t.inArray(l,this._columns())){if(c.serverSide&&(i-=c.start),c=u.cells(null,l,{search:"applied",order:"applied"}).flatten(),c=u.cell(c[i]),f){if(f.node===c.node())return void this._emitEvent("key-refocus",[this.s.dt,c,s||null]);this._blur()}this._removeOtherFocus(),(f=t(c.node())).addClass(this.c.className),this._updateFixedColumns(l),r!==o&&!0!==r||(this._scroll(t(e),t(n.body),f,"offset"),(r=u.table().body().parentNode)!==u.table().header().parentNode&&(r=t(r.parentNode),this._scroll(r,r,f,"position"))),this.s.lastFocus={cell:c,node:c.node(),relative:{row:u.rows({page:"current"}).indexes().indexOf(c.index().row),column:c.index().column}},this._emitEvent("key-focus",[this.s.dt,c,s||null]),u.state.save()}}},_key:function(e){if(this.s.waitingForDraw)e.preventDefault();else{var n=this.s.enable;this.s.returnSubmit=("navigation-only"===n||"tab-only"===n)&&13===e.keyCode;var o=!0===n||"navigation-only"===n;if(n&&(!(0===e.keyCode||e.ctrlKey||e.metaKey||e.altKey)||e.ctrlKey&&e.altKey)){var i=this.s.lastFocus;if(i)if(this.s.dt.cell(i.node).any()){i=this.s.dt;var l=!!this.s.dt.settings()[0].oScroll.sY;if(!this.c.keys||-1!==t.inArray(e.keyCode,this.c.keys))switch(e.keyCode){case 9:this._shift(e,e.shiftKey?"left":"right",!0);break;case 27:this.c.blurable&&!0===n&&this._blur();break;case 33:case 34:o&&!l&&(e.preventDefault(),i.page(33===e.keyCode?"previous":"next").draw(!1));break;case 35:case 36:o&&(e.preventDefault(),n=i.cells({page:"current"}).indexes(),o=this._columns(),this._focus(i.cell(n[35===e.keyCode?n.length-1:o[0]]),null,!0,e));break;case 37:o&&this._shift(e,"left");break;case 38:o&&this._shift(e,"up");break;case 39:o&&this._shift(e,"right");break;case 40:o&&this._shift(e,"down");break;case 113:if(this.c.editor){this._editor(null,e,!0);break}default:!0===n&&this._emitEvent("key",[i,e.keyCode,this.s.lastFocus.cell,e])}}else this.s.lastFocus=null}}},_removeOtherFocus:function(){var e=this.s.dt.table().node();t.fn.dataTable.tables({api:!0}).iterator("table",(function(t){this.table().node()!==e&&this.cell.blur()}))},_scroll:function(t,e,n,o){var i=n[o](),l=n.outerHeight(),r=n.outerWidth(),s=e.scrollTop(),a=e.scrollLeft(),u=t.height();t=t.width(),"position"===o&&(i.top+=parseInt(n.closest("table").css("top"),10)),i.top<s&&e.scrollTop(i.top),i.left<a&&e.scrollLeft(i.left),i.top+l>s+u&&l<u&&e.scrollTop(i.top+l-u),i.left+r>a+t&&r<t&&e.scrollLeft(i.left+r-t)},_shift:function(e,n,o){var i=this.s.dt,l=i.page.info(),r=l.recordsDisplay,s=this._columns(),a=this.s.lastFocus;if(a){var u=a.cell;u&&(a=i.rows({filter:"applied",order:"applied"}).indexes().indexOf(u.index().row),l.serverSide&&(a+=l.start),l=i.columns(s).indexes().indexOf(u.index().column),u=s[l],"rtl"===t(i.table().node()).css("direction")&&("right"===n?n="left":"left"===n&&(n="right")),"right"===n?l>=s.length-1?(a++,u=s[0]):u=s[l+1]:"left"===n?0===l?(a--,u=s[s.length-1]):u=s[l-1]:"up"===n?a--:"down"===n&&a++,0<=a&&a<r&&-1!==t.inArray(u,s)?(e&&e.preventDefault(),this._focus(a,u,!0,e)):o&&this.c.blurable?this._blur():e&&e.preventDefault())}},_tabInput:function(){var e=this,n=this.s.dt,o=null!==this.c.tabIndex?this.c.tabIndex:n.settings()[0].iTabIndex;-1!=o&&(this.s.tabInput||((o=t('<div><input type="text" tabindex="'+o+'"/></div>').css({position:"absolute",height:1,width:0,overflow:"hidden"})).children().on("focus",(function(t){var o=n.cell(":eq(0)",e._columns(),{page:"current"});o.any()&&e._focus(o,null,!0,t)})),this.s.tabInput=o),(o=this.s.dt.cell(":eq(0)","0:visible",{page:"current",order:"current"}).node())&&t(o).prepend(this.s.tabInput))},_updateFixedColumns:function(t){var e=this.s.dt,n=e.settings()[0];if(n._oFixedColumns){var o=n.aoColumns.length-n._oFixedColumns.s.iRightColumns;(t<n._oFixedColumns.s.iLeftColumns||t>=o)&&e.fixedColumns().update()}}}),s.defaults={blurable:!0,className:"focus",clipboard:!0,clipboardOrthogonal:"display",columns:"",editor:null,editOnFocus:!1,editorOptions:null,focus:null,keys:null,tabIndex:null},s.version="2.6.4",t.fn.dataTable.KeyTable=s,t.fn.DataTable.KeyTable=s,i.Api.register("cell.blur()",(function(){return this.iterator("table",(function(t){t.keytable&&t.keytable.blur()}))})),i.Api.register("cell().focus()",(function(){return this.iterator("cell",(function(t,e,n){t.keytable&&t.keytable.focus(e,n)}))})),i.Api.register("keys.disable()",(function(){return this.iterator("table",(function(t){t.keytable&&t.keytable.enable(!1)}))})),i.Api.register("keys.enable()",(function(t){return this.iterator("table",(function(e){e.keytable&&e.keytable.enable(t===o||t)}))})),i.Api.register("keys.enabled()",(function(t){return!!(t=this.context).length&&!!t[0].keytable&&t[0].keytable.enabled()})),i.Api.register("keys.move()",(function(t){return this.iterator("table",(function(e){e.keytable&&e.keytable._shift(null,t,!1)}))})),i.ext.selector.cell.push((function(t,e,n){e=e.focused;var i=[];if(!(t=t.keytable)||e===o)return n;for(var l=0,r=n.length;l<r;l++)(!0===e&&t.focused(n[l])||!1===e&&!t.focused(n[l]))&&i.push(n[l]);return i})),t(n).on("preInit.dt.dtk",(function(e,n,o){"dt"===e.namespace&&(e=n.oInit.keys,o=i.defaults.keys,e||o)&&(o=t.extend({},o,e),!1!==e&&new s(n,o))})),s},"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document);