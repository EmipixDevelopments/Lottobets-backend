var e;e=function(e){var n=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,t=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,i=/[*+-]\s/;function r(e,t){var i=t.line,r=0,l=0,o=n.exec(e.getLine(i)),a=o[1];do{var s=i+(r+=1),d=e.getLine(s),c=n.exec(d);if(c){var f=c[1],p=parseInt(o[3],10)+r-l,g=parseInt(c[3],10),h=g;if(a!==f||isNaN(g)){if(a.length>f.length)return;if(a.length<f.length&&1===r)return;l+=1}else p===g&&(h=g+1),p>g&&(h=p+1),e.replaceRange(d.replace(n,f+h+c[4]+c[5]),{line:s,ch:0},{line:s,ch:d.length})}}while(c)}e.commands.newlineAndIndentContinueMarkdownList=function(l){if(l.getOption("disableInput"))return e.Pass;for(var o=l.listSelections(),a=[],s=0;s<o.length;s++){var d=o[s].head,c=l.getStateAfter(d.line),f=e.innerMode(l.getMode(),c);if("markdown"!==f.mode.name)return void l.execCommand("newlineAndIndent");var p=!1!==(c=f.state).list,g=0!==c.quote,h=l.getLine(d.line),m=n.exec(h),u=/^\s*$/.test(h.slice(0,d.ch));if(!o[s].empty()||!p&&!g||!m||u)return void l.execCommand("newlineAndIndent");if(t.test(h)){var v=g&&/>\s*$/.test(h),x=!/>\s*$/.test(h);(v||x)&&l.replaceRange("",{line:d.line,ch:0},{line:d.line,ch:d.ch+1}),a[s]="\n"}else{var I=m[1],w=m[5],b=!(i.test(m[2])||m[2].indexOf(">")>=0),y=b?parseInt(m[3],10)+1+m[4]:m[2].replace("x"," ");a[s]="\n"+I+y+w,b&&r(l,d)}}l.replaceSelections(a)}},"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror);