var e;e=function(e){e.registerGlobalHelper("fold","comment",(function(e){return e.blockCommentStart&&e.blockCommentEnd}),(function(t,o){var n=t.getModeAt(o),r=n.blockCommentStart,i=n.blockCommentEnd;if(r&&i){for(var f,l=o.line,m=t.getLine(l),a=o.ch,c=0;;){var d=a<=0?-1:m.lastIndexOf(r,a-1);if(-1!=d){if(1==c&&d<o.ch)return;if(/comment/.test(t.getTokenTypeAt(e.Pos(l,d+1)))&&(0==d||m.slice(d-i.length,d)==i||!/comment/.test(t.getTokenTypeAt(e.Pos(l,d))))){f=d+r.length;break}a=d-1}else{if(1==c)return;c=1,a=m.length}}var s,b,g=1,u=t.lastLine();e:for(var h=l;h<=u;++h)for(var k=t.getLine(h),v=h==l?f:0;;){var p=k.indexOf(r,v),y=k.indexOf(i,v);if(p<0&&(p=k.length),y<0&&(y=k.length),(v=Math.min(p,y))==k.length)break;if(v==p)++g;else if(!--g){s=h,b=v;break e}++v}if(null!=s&&(l!=s||b!=f))return{from:e.Pos(l,f),to:e.Pos(s,b)}}}))},"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror);