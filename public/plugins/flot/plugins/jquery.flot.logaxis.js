!function(t){var n={xaxis:{}},o=r(Number.MAX_VALUE,10),e=r(Number.MAX_VALUE,4);function r(t,n){for(var o,e,r=Math.floor(Math.log(t)*Math.LOG10E)-1,i=[],a=-r;a<=r;a++){e=parseFloat("1e"+a);for(var l=1;l<9;l+=n)o=e*l,i.push(o)}return i}var i=function(n,r,i){var l=[],u=-1,s=-1,f=n.getCanvas(),c=o,p=a(r,n),m=r.max;i||(i=.3*Math.sqrt("x"===r.direction?f.width:f.height)),o.some((function(t,n){return t>=p&&(u=n,!0)})),o.some((function(t,n){return t>=m&&(s=n,!0)})),-1===s&&(s=o.length-1),s-u<=i/4&&c.length!==e.length&&(c=e,u*=2,s*=2);var h,d,x,g=null,v=1/i;if(s-u>=i/4){for(var M=s;M>=u;M--)h=c[M],d=(Math.log(h)-Math.log(p))/(Math.log(m)-Math.log(p)),x=h,null===g?g={pixelCoord:d,idealPixelCoord:d}:Math.abs(d-g.pixelCoord)>=v?g={pixelCoord:d,idealPixelCoord:g.idealPixelCoord-v}:x=null,x&&l.push(x);l.reverse()}else{var k=n.computeTickSize(p,m,i),F={min:p,max:m,tickSize:k};l=t.plot.linearTickGenerator(F)}return l},a=function(t,n){var o=t.min,e=t.max;return o<=0&&e<(o=null===t.datamin?t.min=.1:h(n,t))&&(t.max=null!==t.datamax?t.datamax:t.options.max,t.options.offset.below=0,t.options.offset.above=0),o},l=function(n,o,e){var r=n>0?Math.floor(Math.log(n)/Math.LN10):0;if(e)return r>=-4&&r<=7?t.plot.defaultTickFormatter(n,o,e):t.plot.expRepTickFormatter(n,o,e);if(r>=-4&&r<=7){var i=r<0?n.toFixed(-r):n.toFixed(r+2);if(-1!==i.indexOf(".")){for(var a=i.lastIndexOf("0");a===i.length-1;)a=(i=i.slice(0,-1)).lastIndexOf("0");i.indexOf(".")===i.length-1&&(i=i.slice(0,-1))}return i}return t.plot.expRepTickFormatter(n,o)},u=function(t){return t<o[0]&&(t=o[0]),Math.log(t)},s=function(t){return Math.exp(t)},f=function(t){return-t},c=function(t){return-u(t)},p=function(t){return s(-t)};function m(t,n){"log"===n.options.mode&&n.datamin<=0&&(null===n.datamin?n.datamin=.1:n.datamin=h(t,n))}function h(t,n){var o=t.getData().filter((function(t){return t.xaxis===n||t.yaxis===n})).map((function(n){return t.computeRangeForDataSeries(n,null,d)})),e="x"===n.direction?Math.min(.1,o&&o[0]?o[0].xmin:.1):Math.min(.1,o&&o[0]?o[0].ymin:.1);return n.min=e,e}function d(t){return t>0}function x(n){n.hooks.processOptions.push((function(n){t.each(n.getAxes(),(function(t,o){var e=o.options;"log"===e.mode?(o.tickGenerator=function(t){return i(n,t,11)},"function"!=typeof o.options.tickFormatter&&(o.options.tickFormatter=l),o.options.transform=e.inverted?c:u,o.options.inverseTransform=e.inverted?p:s,o.options.autoScaleMargin=0,n.hooks.setRange.push(m)):e.inverted&&(o.options.transform=f,o.options.inverseTransform=f)}))}))}t.plot.plugins.push({init:x,options:n,name:"log",version:"0.1"}),t.plot.logTicksGenerator=i,t.plot.logTickFormatter=l}(jQuery);