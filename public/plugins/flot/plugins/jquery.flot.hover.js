!function(e){var t={grid:{hoverable:!1,clickable:!1}},i=e.plot.browser,o={click:"click",hover:"hover"};function r(t){var r,a=[];function n(e,t){var i=e.getOptions();(i.grid.hoverable||i.grid.clickable)&&(t[0].addEventListener("touchevent",d,!1),t[0].addEventListener("tap",l,!1)),i.grid.clickable&&t.bind("click",u),i.grid.hoverable&&(t.bind("mousemove",h),t.bind("mouseleave",p))}function s(e,t){t[0].removeEventListener("tap",l),t[0].removeEventListener("touchevent",d),t.unbind("mousemove",h),t.unbind("mouseleave",p),t.unbind("click",u),a=[]}function l(e){var i=t.getOptions(),r=new CustomEvent("mouseevent");return r.pageX=e.detail.changedTouches[0].pageX,r.pageY=e.detail.changedTouches[0].pageY,r.clientX=e.detail.changedTouches[0].clientX,r.clientY=e.detail.changedTouches[0].clientY,i.grid.hoverable&&c(r,o.hover,30),!1}function c(e,i,o){var r=t.getData();if(void 0!==e&&r.length>0&&void 0!==r[0].xaxis.c2p&&void 0!==r[0].yaxis.c2p){var a=i+"able";g("plot"+i,e,(function(e){return!1!==r[e][a]}),o)}}function h(e){r=e,t.getPlaceholder()[0].lastMouseMoveEvent=e,c(e,o.hover)}function p(e){r=void 0,t.getPlaceholder()[0].lastMouseMoveEvent=void 0,g("plothover",e,(function(e){return!1}))}function u(e){c(e,o.click)}function d(){t.unhighlight(),t.getPlaceholder().trigger("plothovercleanup")}function g(e,o,r,n){var s=t.getOptions(),l=t.offset(),c=i.getPageXY(o),h=c.X-l.left,p=c.Y-l.top,u=t.c2p({left:h,top:p}),d=void 0!==n?n:s.grid.mouseActiveRadius;u.pageX=c.X,u.pageY=c.Y;var g=t.findNearbyItems(h,p,r,d),b=g[0];for(let e=1;e<g.length;++e)(void 0===b.distance||g[e].distance<b.distance)&&(b=g[e]);if(b?(b.pageX=parseInt(b.series.xaxis.p2c(b.datapoint[0])+l.left,10),b.pageY=parseInt(b.series.yaxis.p2c(b.datapoint[1])+l.top,10)):b=null,s.grid.autoHighlight){for(let t=0;t<a.length;++t){var m=a[t];(m.auto!==e||b&&m.series===b.series&&m.point[0]===b.datapoint[0]&&m.point[1]===b.datapoint[1])&&b||f(m.series,m.point)}b&&v(b.series,b.datapoint,e)}t.getPlaceholder().trigger(e,[u,b,g])}function v(e,i,o){if("number"==typeof e&&(e=t.getData()[e]),"number"==typeof i){var r=e.datapoints.pointsize;i=e.datapoints.points.slice(r*i,r*(i+1))}var n=b(e,i);-1===n?(a.push({series:e,point:i,auto:o}),t.triggerRedrawOverlay()):o||(a[n].auto=!1)}function f(e,i){if(null==e&&null==i)return a=[],void t.triggerRedrawOverlay();if("number"==typeof e&&(e=t.getData()[e]),"number"==typeof i){var o=e.datapoints.pointsize;i=e.datapoints.points.slice(o*i,o*(i+1))}var r=b(e,i);-1!==r&&(a.splice(r,1),t.triggerRedrawOverlay())}function b(e,t){for(var i=0;i<a.length;++i){var o=a[i];if(o.series===e&&o.point[0]===t[0]&&o.point[1]===t[1])return i}return-1}function m(){d(),c(r,o.hover)}function y(){c(r,o.hover)}function k(e,t,i){var o,r,n=e.getPlotOffset();for(t.save(),t.translate(n.left,n.top),o=0;o<a.length;++o)(r=a[o]).series.bars.show?w(r.series,r.point,t):x(r.series,r.point,t,e);t.restore()}function x(t,i,o,r){var a=i[0],n=i[1],s=t.xaxis,l=t.yaxis,c="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(a<s.min||a>s.max||n<l.min||n>l.max)){var h=t.points.radius+t.points.lineWidth/2;o.lineWidth=h,o.strokeStyle=c;var p=1.5*h;a=s.p2c(a),n=l.p2c(n),o.beginPath();var u=t.points.symbol;"circle"===u?o.arc(a,n,p,0,2*Math.PI,!1):"string"==typeof u&&r.drawSymbol&&r.drawSymbol[u]&&r.drawSymbol[u](o,a,n,p,!1),o.closePath(),o.stroke()}}function w(t,i,o){var r,a="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),n=a,s=t.bars.barWidth[0]||t.bars.barWidth;switch(t.bars.align){case"left":r=0;break;case"right":r=-s;break;default:r=-s/2}o.lineWidth=t.bars.lineWidth,o.strokeStyle=a;var l=t.bars.fillTowards||0,c=l>t.yaxis.min?Math.min(t.yaxis.max,l):t.yaxis.min;e.plot.drawSeries.drawBar(i[0],i[1],i[2]||c,r,r+s,(function(){return n}),t.xaxis,t.yaxis,o,t.bars.horizontal,t.bars.lineWidth)}function P(e,t){e.highlight=v,e.unhighlight=f,(t.grid.hoverable||t.grid.clickable)&&(e.hooks.drawOverlay.push(k),e.hooks.processDatapoints.push(m),e.hooks.setupGrid.push(y)),r=e.getPlaceholder()[0].lastMouseMoveEvent}t.hooks.bindEvents.push(n),t.hooks.shutdown.push(s),t.hooks.processOptions.push(P)}e.plot.plugins.push({init:r,options:t,name:"hover",version:"0.1"})}(jQuery);