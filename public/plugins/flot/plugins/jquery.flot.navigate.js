!function(t){var e={zoom:{interactive:!1,active:!1,amount:1.5},pan:{interactive:!1,active:!1,cursor:"move",frameRate:60,mode:"smart"},recenter:{interactive:!0},xaxis:{axisZoom:!0,plotZoom:!0,axisPan:!0,plotPan:!0,panRange:[void 0,void 0],zoomRange:[void 0,void 0]},yaxis:{axisZoom:!0,plotZoom:!0,axisPan:!0,plotPan:!0,panRange:[void 0,void 0],zoomRange:[void 0,void 0]}},a=t.plot.saturated,o=t.plot.browser,n=t.plot.uiConstants.SNAPPING_CONSTANT,i=t.plot.uiConstants.PANHINT_LENGTH_CONSTANT;function r(t){t.hooks.processOptions.push(s)}function s(e,r){var s=null,f=!1,c="manual"===r.pan.mode,l="smartLock"===r.pan.mode,u=l||"smart"===r.pan.mode;function p(t,a,n){var i=o.getPageXY(t),r=e.offset();r.left=i.X-r.left,r.top=i.Y-r.top;var s=e.getPlaceholder().offset();s.left=i.X-s.left,s.top=i.Y-s.top;var f=e.getXAxes().concat(e.getYAxes()).filter((function(t){var e=t.box;if(void 0!==e)return s.left>e.left&&s.left<e.left+e.width&&s.top>e.top&&s.top<e.top+e.height}));0===f.length&&(f=void 0),a?e.zoomOut({center:r,axes:f,amount:n}):e.zoom({center:r,axes:f,amount:n})}var d,g="default",v=null,x=null,m={x:0,y:0},h=!1;function b(t,a){var o=1,n=null,i=50,r=Math.abs(t.originalEvent.deltaY)<=o?1+Math.abs(t.originalEvent.deltaY)/i:n;if(h&&O(t),e.getOptions().zoom.active)return t.preventDefault(),p(t,a<0,r),!1}function y(t){f=!0}function P(t){f=!1}function w(t){return 0===t.button}function M(t){if(!f||!w(t))return!1;h=!0;var a=o.getPageXY(t),n=e.getPlaceholder().offset();n.left=a.X-n.left,n.top=a.Y-n.top,0===(s=e.getXAxes().concat(e.getYAxes()).filter((function(t){var e=t.box;if(void 0!==e)return n.left>e.left&&n.left<e.left+e.width&&n.top>e.top&&n.top<e.top+e.height}))).length&&(s=void 0);var i=e.getPlaceholder().css("cursor");i&&(g=i),e.getPlaceholder().css("cursor",e.getOptions().pan.cursor),u?d=e.navigationState(a.X,a.Y):c&&(m.x=a.X,m.y=a.Y)}function Y(t){if(h){var a=o.getPageXY(t),n=e.getOptions().pan.frameRate;-1!==n?!x&&n&&(x=setTimeout((function(){u?e.smartPan({x:d.startPageX-a.X,y:d.startPageY-a.Y},d,s,!1,l):c&&(e.pan({left:m.x-a.X,top:m.y-a.Y,axes:s}),m.x=a.X,m.y=a.Y),x=null}),1/n*1e3)):u?e.smartPan({x:d.startPageX-a.X,y:d.startPageY-a.Y},d,s,!1,l):c&&(e.pan({left:m.x-a.X,top:m.y-a.Y,axes:s}),m.x=a.X,m.y=a.Y)}}function O(t){if(h){x&&(clearTimeout(x),x=null),h=!1;var a=o.getPageXY(t);e.getPlaceholder().css("cursor",g),u?(e.smartPan({x:d.startPageX-a.X,y:d.startPageY-a.Y},d,s,!1,l),e.smartPan.end()):c&&(e.pan({left:m.x-a.X,top:m.y-a.Y,axes:s}),m.x=0,m.y=0)}}function X(a){if(e.activate(),e.getOptions().recenter.interactive){var o,n=e.getTouchedAxis(a.clientX,a.clientY);e.recenter({axes:n[0]?n:null}),o=n[0]?new t.Event("re-center",{detail:{axisTouched:n[0]}}):new t.Event("re-center",{detail:a}),e.getPlaceholder().trigger(o)}}function T(t){return e.activate(),h&&O(t),!1}function z(t,e){var a=t.getOptions();a.zoom.interactive&&e.mousewheel(b),a.pan.interactive&&(t.addEventHandler("dragstart",M,e,0),t.addEventHandler("drag",Y,e,0),t.addEventHandler("dragend",O,e,0),e.bind("mousedown",y),e.bind("mouseup",P)),e.dblclick(X),e.click(T)}e.navigationState=function(t,e){var a=this.getAxes(),o={};return Object.keys(a).forEach((function(t){var e=a[t];o[t]={navigationOffset:{below:e.options.offset.below||0,above:e.options.offset.above||0},axisMin:e.min,axisMax:e.max,diagMode:!1}})),o.startPageX=t||0,o.startPageY=e||0,o},e.activate=function(){var t=e.getOptions();t.pan.active&&t.zoom.active||(t.pan.active=!0,t.zoom.active=!0,e.getPlaceholder().trigger("plotactivated",[e]))},e.zoomOut=function(t){t||(t={}),t.amount||(t.amount=e.getOptions().zoom.amount),t.amount=1/t.amount,e.zoom(t)},e.zoom=function(a){a||(a={});var o=a.center,n=a.amount||e.getOptions().zoom.amount,i=e.width(),r=e.height(),s=a.axes||e.getAxes();o||(o={left:i/2,top:r/2});var f=o.left/i,c=o.top/r,l={x:{min:o.left-f*i/n,max:o.left+(1-f)*i/n},y:{min:o.top-c*r/n,max:o.top+(1-c)*r/n}};for(var u in s)if(s.hasOwnProperty(u)){var p=s[u],d=p.options,g=l[p.direction].min,v=l[p.direction].max,x=p.options.offset;if((d.axisZoom||!a.axes)&&(a.axes||d.plotZoom)){if((g=t.plot.saturated.saturate(p.c2p(g)))>(v=t.plot.saturated.saturate(p.c2p(v)))){var m=g;g=v,v=m}if(d.zoomRange){if(v-g<d.zoomRange[0])continue;if(v-g>d.zoomRange[1])continue}var h=t.plot.saturated.saturate(x.below-(p.min-g)),b=t.plot.saturated.saturate(x.above-(p.max-v));d.offset={below:h,above:b}}}e.setupGrid(!0),e.draw(),a.preventEvent||e.getPlaceholder().trigger("plotzoom",[e,a])},e.pan=function(o){var n={x:+o.left,y:+o.top};isNaN(n.x)&&(n.x=0),isNaN(n.y)&&(n.y=0),t.each(o.axes||e.getAxes(),(function(t,e){var i=e.options,r=n[e.direction];if((i.axisPan||!o.axes)&&(i.plotPan||o.axes)){var s=e.p2c(i.panRange[0])-e.p2c(e.min),f=e.p2c(i.panRange[1])-e.p2c(e.max);if(void 0!==i.panRange[0]&&r>=f&&(r=f),void 0!==i.panRange[1]&&r<=s&&(r=s),0!==r){var c=a.saturate(e.c2p(e.p2c(e.min)+r)-e.c2p(e.p2c(e.min))),l=a.saturate(e.c2p(e.p2c(e.max)+r)-e.c2p(e.p2c(e.max)));isFinite(c)||(c=0),isFinite(l)||(l=0),i.offset={below:a.saturate(c+(i.offset.below||0)),above:a.saturate(l+(i.offset.above||0))}}}})),e.setupGrid(!0),e.draw(),o.preventEvent||e.getPlaceholder().trigger("plotpan",[e,o])},e.recenter=function(a){t.each(a.axes||e.getAxes(),(function(t,e){a.axes?"x"===this.direction?e.options.offset={below:0}:"y"===this.direction&&(e.options.offset={above:0}):e.options.offset={below:0,above:0}})),e.setupGrid(!0),e.draw()};var R=function(t){return Math.abs(t.y)<n&&Math.abs(t.x)>=n||Math.abs(t.x)<n&&Math.abs(t.y)>=n},A=function(t){return Math.abs(t.x)<n&&Math.abs(t.y)>=n?{x:0,y:t.y}:Math.abs(t.y)<n&&Math.abs(t.x)>=n?{x:t.x,y:0}:t},N=null,k=function(t){switch(!N&&Math.max(Math.abs(t.x),Math.abs(t.y))>=n&&(N=Math.abs(t.x)<Math.abs(t.y)?"y":"x"),N){case"x":return{x:t.x,y:0};case"y":return{x:0,y:t.y};default:return{x:0,y:0}}},E=function(t){return Math.abs(t.x)>0&&Math.abs(t.y)>0},G=function(t,e,a){var o;Object.keys(t).forEach((function(n){o=t[n],0===a[o.direction]&&(o.options.offset.below=e[n].navigationOffset.below,o.options.offset.above=e[n].navigationOffset.above)}))},S={x:0,y:0};function Z(t,e){e.unbind("mousewheel",b),e.unbind("mousedown",y),e.unbind("mouseup",P),e.unbind("dragstart",M),e.unbind("drag",Y),e.unbind("dragend",O),e.unbind("dblclick",X),e.unbind("click",T),x&&clearTimeout(x)}function H(t,e){if(v){e.strokeStyle="rgba(96, 160, 208, 0.7)",e.lineWidth=2,e.lineJoin="round";var a,o,n=Math.round(v.start.x),r=Math.round(v.start.y);if(s?"x"===s[0].direction?(o=Math.round(v.start.y),a=Math.round(v.end.x)):"y"===s[0].direction&&(a=Math.round(v.start.x),o=Math.round(v.end.y)):(a=Math.round(v.end.x),o=Math.round(v.end.y)),e.beginPath(),!1===v.end)e.moveTo(n,r-i),e.lineTo(n,r+i),e.moveTo(n+i,r),e.lineTo(n-i,r);else{var f=r===o;e.moveTo(n-(f?0:i),r-(f?i:0)),e.lineTo(n+(f?0:i),r+(f?i:0)),e.moveTo(n,r),e.lineTo(a,o),e.moveTo(a-(f?0:i),o-(f?i:0)),e.lineTo(a+(f?0:i),o+(f?i:0))}e.stroke()}}e.smartPan=function(t,o,n,i,r){var s,f,c,l,u,p,d=!!r||R(t),g=e.getAxes();t=r?k(t):A(t),E(t)&&(o.diagMode=!0),d&&!0===o.diagMode&&(o.diagMode=!1,G(g,o,t)),v=d?{start:{x:o.startPageX-e.offset().left+e.getPlotOffset().left,y:o.startPageY-e.offset().top+e.getPlotOffset().top},end:{x:o.startPageX-t.x-e.offset().left+e.getPlotOffset().left,y:o.startPageY-t.y-e.offset().top+e.getPlotOffset().top}}:{start:{x:o.startPageX-e.offset().left+e.getPlotOffset().left,y:o.startPageY-e.offset().top+e.getPlotOffset().top},end:!1},isNaN(t.x)&&(t.x=0),isNaN(t.y)&&(t.y=0),n&&(g=n),Object.keys(g).forEach((function(e){if(f=g[e],c=f.min,l=f.max,s=f.options,p=t[f.direction],u=S[f.direction],(s.axisPan||!n)&&(n||s.plotPan)){var o=u+f.p2c(s.panRange[0])-f.p2c(c),i=u+f.p2c(s.panRange[1])-f.p2c(l);if(void 0!==s.panRange[0]&&p>=i&&(p=i),void 0!==s.panRange[1]&&p<=o&&(p=o),0!==p){var r=a.saturate(f.c2p(f.p2c(c)-(u-p))-f.c2p(f.p2c(c))),d=a.saturate(f.c2p(f.p2c(l)-(u-p))-f.c2p(f.p2c(l)));isFinite(r)||(r=0),isFinite(d)||(d=0),f.options.offset.below=a.saturate(r+(f.options.offset.below||0)),f.options.offset.above=a.saturate(d+(f.options.offset.above||0))}}})),S=t,e.setupGrid(!0),e.draw(),i||e.getPlaceholder().trigger("plotpan",[e,t,n,o])},e.smartPan.end=function(){v=null,N=null,S={x:0,y:0},e.triggerRedrawOverlay()},e.getTouchedAxis=function(t,a){var o=e.getPlaceholder().offset();return o.left=t-o.left,o.top=a-o.top,e.getXAxes().concat(e.getYAxes()).filter((function(t){var e=t.box;if(void 0!==e)return o.left>e.left&&o.left<e.left+e.width&&o.top>e.top&&o.top<e.top+e.height}))},e.hooks.drawOverlay.push(H),e.hooks.bindEvents.push(z),e.hooks.shutdown.push(Z)}t.plot.plugins.push({init:r,options:e,name:"navigate",version:"1.3"})}(jQuery);